on:
 
  push:
    branches:
      - master

  pull_request:
    branches:
      - master

jobs:

  build:

    name: BUILD

    runs-on: ubuntu-latest

    steps:

      - name: CHECKOUT CODE
      
        uses: actions/checkout@v2

      - name: Install node 16

        uses: actions/steup-node@v1

        with:
          node-version: 16.x
      - name: INSTALL NPM DEPENDENCIeS
     
        run: npm i

      - name: BUILD PROJECT

        run: npm run build  

      - name: UPLOAD ARTIFACT IN ORDER TO DEPLOY
      
        uses: actions/upload-artifact@v2

        with:
        
          name: production-files
        
          path: ./dist

  deploy:
    name: DEPLOY
    runs-on: ubuntu-latest
    needs: build 

   steps: 
     - name: Download artifact
       uses: actions/download-artifact@v2
       with:
         name: production-files
         path: ./dist

     - name: Deploy to gh pages
       uses: peacerisis/actions-gh-pages@v3
       with: 
        github_tokken: ${{ secrets.GH_ACCESS_TOKKEN }}
        publish_dir: ./dist  
